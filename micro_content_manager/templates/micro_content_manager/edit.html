{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit</title>
</head>
<body>


<h1>Micro-learning contents generator</h1>

<p><a class="button" href="{% url 'user_page' %}">Go home</a></p>
<p><a class="button" href="{% url 'micro_content_manager:index' %}">Back</a></p>


<form action="{% url 'micro_content_manager:update' %}" method="post">

    {% csrf_token %}

    <h2>Content</h2>
        <input type="hidden" name="id" value="{{ id }}">
        <p>Id: {{ id }}</p>
        <p>Title: <input type="text" name="title" value="{{ content.title }}" required></p>
        <p>Tags:<input type="text" name="mc_tags" value="{{mc_tags}}" required>
          Tags must be inserted separated by blank spaces (e.g., Tag1 Tag2 Tag3)</p>
        {% for p in content.text %}
            <p>Paragraph {{ forloop.counter }}:<textarea name="paragraph{{ forloop.counter }}" rows="2"
                                                         cols="100">{{ p }}</textarea></p>
        {% endfor %}


     {% for v in micro_content.videos %}
                   <li>Video {{ forloop.counter }}</li>
                    Url: {{ v.url }}
                    Format: {{ v.video_format }}
                    Upload_form: {{ v.video_upload_form }}
              {% endfor%}

        {% for v in content.videos %}
            <p>Video {{ forloop.counter }}</p>
            <p>Video URL:<input name="videoURL{{ forloop.counter }}" type="url" value="{{ v.url }}" style="width: 500px;"></p>
            <p>Video format:<select name="videoFormat{{ forloop.counter }}">
                <option value="mp4" {% if v.format == 'mp4' %} selected {% endif %}>mp4</option>
                <option value="ogg" {% if v.format == 'ogg' %} selected {% endif %}>ogg</option>
            </select></p>

             <p>Video upload form:<select name="video_upload_form{{ forloop.counter }}">
                <option value="from_existing_file" {% if v.upload_form == 'from_existing_file' %} selected {% endif %}>From existing file</option>
                <option value="link_from_youtube" {% if v.upload_form == 'link_from_youtube' %} selected {% endif %}>Link from YouTube</option>
                <option value="download_from_youtube" {% if v.upload_form == 'download_from_youtube' %} selected {% endif %}>Download from Youtube</option>
                <option value="external_repository" {% if v.upload_form == 'external_repository' %} selected {% endif %}>From external repository</option>
            </select></p>
        {% endfor %}

    <h2>Quiz</h2>

        {% for q in content.questions.all %}
                <p>Question {{ forloop.counter }}: <textarea name="question{{ forloop.counter }}" rows="1"
                                                             cols="100">{{ q.question }}</textarea></p>
                Choices {{ forloop.counter }} (write the possible answers and select the correct one):<br>

               {% for choice in q.choices.all %}
                    <input type="radio" name="answer{{ forloop.parentloop.counter }}"
                           value="choice{{ forloop.parentloop.counter }}_{{ forloop.counter }}"
                           {% if forloop.counter == 1 %}checked {% endif %}>
                    <input type="text" name="choice{{ forloop.parentloop.counter }}_{{ forloop.counter }}" value={{ choice }}>    <br>
               {% endfor %}

                <p>Explanation {{ forloop.counter }}: <textarea name="explanation{{ forloop.counter }}" rows="2"
                                                                cols="100">{{ q.explanation }}</textarea></p>
        {% endfor %}
        <input type="submit" value="Edit micro-learning content">

</form>

</body>
</html>